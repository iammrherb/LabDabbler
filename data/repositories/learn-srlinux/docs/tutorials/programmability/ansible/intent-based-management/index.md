---
comments: true
tags:
    - ansible
---
# Intent-based fabric management with Ansible

| Summary                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Lab name**                | 4l2s                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Lab components**          | 6 SR Linux nodes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Resource requirements**   | :fontawesome-solid-microchip: 4vCPU <br/>:fontawesome-solid-memory: 10 GB                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Lab repo**                | [intent-based-ansible-lab][lab-repo]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Authors**                 | Walter De Smedt [:material-linkedin:][wds-linkedin]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Main ref documents**      | [Ansible collection for SR Linux][collection-doc-link]<br/>[RFC 7432 - BGP MPLS-Based Ethernet VPN](https://datatracker.ietf.org/doc/html/rfc7432)<br/>[RFC 8365 - A Network Virtualization Overlay Solution Using Ethernet VPN (EVPN)](https://datatracker.ietf.org/doc/html/rfc8365)<br/>[Nokia 7220 SR Linux Advanced Solutions Guide](https://documentation.nokia.com/srlinux/23-3/books/advanced-solutions/evpn-vxlan-layer-2-multi-hom.html)<br/>[Nokia 7220 SR Linux EVPN-VXLAN Guide](https://documentation.nokia.com/srlinux/23-3/title/evpn_vxlan.html) |
| **Version information**[^1] | [`containerlab:0.54.2`][clab-install], [`srlinux:24.3.2`][srlinux-container], [`docker-ce:26.1.1`][docker-install]                                                                                                                                                                                                                                                                                                                                                                                                                                                |

Ansible is today the _lingua franca_ for many network engineers to automate the configuration of network devices. Due to its simplicity and low entry barrier, it is a popular choice for network automation that features modular and reusable automation tasks available to network teams.

???tip "Disclaimer: Select the right tool for the job"
    As with every tool there are pros and cons to consider when selecting Ansible for your network automation project. While being simple in many aspects, Ansible tends to be hard to troubleshoot or shoehorn for complex and/or call-intensive automation projects.

    Do your own due diligence and select the right tool for the job at hand. This post explains "a way" to achieve intent-based configuration management, but it is not the only way, nor is it a silver bullet for all automation projects.

With this post, we aim to provide a practical example of using Ansible to manage the configuration of an SR Linux fabric with the **intent-based approach** leveraging the official [Ansible collection for SR Linux][collection-doc-link]. Remember that the demo code we provide throughout this blog post is not an 'off-the-shelf' solution but a demonstration of Ansible collection capabilities and hopefully a source of inspiration for your own automation projects.

The **intent** or desired state of the fabric in this solution is abstracting the device-specific implementation. The abstraction level is always a trade-off between usability of the automation and feature coverage of the managed infrastructure: the higher the abstraction, the more user-friendly it becomes, but at the expense of feature coverage. The right abstraction level depends on your specific use cases and requirements.

The approach we discuss here only partially covers the SR Linux configuration or data model. Only resources required to establish and maintain a functional fabric are covered. The solution is meant to be extended as needed to cover other aspects of the configuration or data model by employing similar techniques, but this is left as an exercise for the reader.

[collection-doc-link]: ../../../../ansible/collection/index.md
[lab-repo]: https://github.com/srl-labs/intent-based-ansible-lab
[wds-linkedin]: https://www.linkedin.com/in/walter-de-smedt-855b49/
[clab-install]: https://containerlab.srlinux.dev/install/
[srlinux-container]: https://github.com/orgs/nokia/packages/container/package/srlinux
[docker-install]: https://docs.docker.com/engine/install/
[^1]: the following versions have been used to create this tutorial. The newer versions might work, but if they don't, please pin the version to the mentioned ones.
